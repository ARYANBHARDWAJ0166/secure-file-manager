{% extends "base.html" %}

{% block content %}
<h2 class="mb-3">Dashboard</h2>
<p>Welcome, {{ session.get('username') }}!</p>

<hr>

<h4 class="mt-4">Upload a file</h4>
<form method="post" action="{{ url_for('upload') }}" enctype="multipart/form-data">
    <div class="mb-3">
        <input class="form-control" type="file" name="file" required>
    </div>
    <button class="btn btn-primary" type="submit">Upload</button>
</form>

<h4 class="mt-4">Your files</h4>

{% if files %}
  <table class="table table-striped table-bordered mt-2">
      <thead class="table-light">
          <tr>
              <th>Name</th>
              <th>Size (bytes)</th>
              <th>Uploaded at</th>
              <th>Actions</th>
          </tr>
      </thead>
      <tbody>
          {% for f in files %}
          <tr>
              <td>{{ f.original_name }}</td>
              <td>{{ f.size }}</td>
              <td>{{ f.uploaded_at }}</td>
              <td>
                  <a class="btn btn-sm btn-outline-primary"
                     href="{{ url_for('download_file', file_id=f.id) }}">
                     Download
                  </a>
              </td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
{% else %}
  <p>You have not uploaded any files yet.</p>
{% endif %}

<a href="{{ url_for('logout') }}" class="btn btn-danger mt-3">Logout</a>
{% endblock %}